# leetcode_2438: Range Product Queries of Powers

> 解題自 LeetCode 2438. Range Product Queries of Powers

## 專案簡介

本專案以 C# 實作 LeetCode 2438 題目，給定一個正整數 n，將其分解為最少數量的 2 的冪次方陣列，並針對多組查詢區間，計算指定範圍內所有冪次方的乘積（取模 10^9+7）。

---

## 題目描述

給定一個正整數 n，存在一個 0 索引的陣列 powers，由最少數量的 2 的冪次方組成，且這些數字的總和為 n。powers 陣列已排序（非遞減），且只有一種方式可以組成。

你還會得到一個 0 索引的二維整數陣列 queries，其中 queries[i] = [lefti, righti]。每個 queries[i] 代表一個查詢，你需要找出所有 powers[j]，其中 lefti <= j <= righti 的乘積。

請回傳一個長度與 queries 相同的陣列 answers，其中 answers[i] 是第 i 個查詢的答案。由於答案可能過大，請對每個答案取模 10^9 + 7。

---

## 解法說明

本專案採用「二進位分解 + 直接計算」的方式，分為兩大步驟：

### 步驟 1：將 n 以二進位分解為 2 的冪次方陣列

- 目標：將 n 拆解為最少數量的 2 的冪次方，使其總和為 n。
- 方法：
  1. 從 n 的最低位元（bit）開始，檢查每一位是否為 1。
  2. 若該位為 1，則將對應的 2 的冪次方（2^k）加入 powers 陣列。
  3. 依序右移 n，並將冪次方值（1, 2, 4, 8, ...）倍增。
- 範例：
  - n = 11（二進位 1011），powers = [1, 2, 8]。

### 步驟 2：針對每個查詢區間計算乘積

- 目標：對每個 queries[i] = [left, right]，計算 powers 陣列中從 left 到 right 的所有元素乘積。
- 方法：
  1. 針對每個查詢，初始化乘積為 1。
  2. 從 powers[left] 乘到 powers[right]，每次都對 10^9+7 取餘數，避免溢位。
  3. 將結果存入答案陣列。
- 範例：
  - powers = [1, 2, 8]，查詢 [0, 1]，結果為 1*2=2。

---

## 執行方式

1. 使用 .NET 8.0 以上版本。
2. 直接執行 `dotnet run` 或於 VS Code 按下偵錯即可。
3. 預設會輸出測試資料結果。

---

## 範例輸出

```
[8, 64, 4]
```

---

> [!TIP]
> 本專案程式碼結構簡潔，適合學習二進位分解與區間查詢乘積的技巧。
