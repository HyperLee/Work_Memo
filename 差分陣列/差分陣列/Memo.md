# LeetCode 3355: é›¶é™£åˆ—è½‰æ› I

æœ¬å°ˆæ¡ˆè§£æ±º LeetCode 3355 é›¶é™£åˆ—è½‰æ›å•é¡Œã€‚ä¸»è¦ä½¿ç”¨å·®åˆ†é™£åˆ—æŠ€è¡“å¯¦ç¾é«˜æ•ˆçš„å€é–“æ“ä½œè¨ˆç®—ã€‚

## ğŸ“ å•é¡Œæè¿°

çµ¦å®šä¸€å€‹æ•´æ•¸é™£åˆ— `nums`ï¼Œå¯ä»¥å°é™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ é€²è¡Œä»¥ä¸‹æ“ä½œï¼š

1. é¸æ“‡ä¸€å€‹ç´¢å¼• `i`ï¼Œä½¿å¾— `0 <= i < nums.length`
2. å°‡ `nums[i]` çš„å€¼æ¸›å°‘ 1

å¦å¤–ï¼Œçµ¦å®šä¸€å€‹æŸ¥è©¢é™£åˆ— `queries`ï¼Œæ¯å€‹æŸ¥è©¢åŒ…å«å…©å€‹æ•´æ•¸ `[l, r]`ï¼Œè¡¨ç¤ºå°ç´¢å¼•å¾ l åˆ° r çš„æ‰€æœ‰å…ƒç´ åŒæ™‚é€²è¡Œä¸Šè¿°æ“ä½œä¸€æ¬¡ã€‚

å•é¡Œè¦æ±‚åˆ¤æ–·æ˜¯å¦å¯ä»¥é€šéåŸ·è¡Œçµ¦å®šçš„æŸ¥è©¢æ“ä½œï¼Œå°‡ `nums` ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è®Šç‚º 0ã€‚

## ğŸ§© è§£æ±ºæ–¹æ¡ˆ

å°ˆæ¡ˆæä¾›äº†ä¸‰ç¨®ä¸åŒçš„å¯¦ç¾æ–¹å¼ï¼Œéƒ½ä½¿ç”¨å·®åˆ†é™£åˆ—æŠ€è¡“åˆ¤æ–·æ˜¯å¦å¯ä»¥å°‡é™£åˆ—è½‰æ›ç‚ºå…¨é›¶é™£åˆ—ï¼š

### 1. IsZeroArray (æ–¹æ³•ä¸€)

æœ€åŸºæœ¬çš„å·®åˆ†é™£åˆ—æ‡‰ç”¨ï¼Œç›´æ¥è¨ˆç®—æ“ä½œæ¬¡æ•¸èˆ‡åŸå§‹å€¼æ¯”è¼ƒã€‚

```csharp
public static bool IsZeroArray(int[] nums, int[][] queries)
```

æ­¤æ–¹æ³•ä½¿ç”¨å·®åˆ†é™£åˆ—æŠ€è¡“è¨˜éŒ„å€é–“æ“ä½œï¼Œç´¯åŠ å¾—åˆ°æ¯å€‹ä½ç½®çš„æ“ä½œæ¬¡æ•¸ï¼Œå†èˆ‡åŸå§‹é™£åˆ—å°æ‡‰ä½ç½®çš„å€¼é€²è¡Œæ¯”è¼ƒï¼Œåˆ¤æ–·æ˜¯å¦å¯ä»¥å°‡æ¯å€‹å…ƒç´ è®Šç‚º 0ã€‚

### 2. IsZeroArray2 (æ–¹æ³•äºŒ)

æ¡ç”¨å·®åˆ†é™£åˆ—çš„é€†å‘æ€è€ƒï¼Œå…ˆå°‡åŸå§‹é™£åˆ—è½‰æ›ç‚ºå…¶å·®åˆ†é™£åˆ—è¡¨ç¤ºå½¢å¼ã€‚

```csharp
public static bool IsZeroArray2(int[] nums, int[][] queries)
```

æ­¤æ–¹æ³•é¦–å…ˆå°‡åŸå§‹é™£åˆ—è½‰ç‚ºå·®åˆ†å½¢å¼ï¼Œç„¶å¾Œå°æŸ¥è©¢å€é–“é€²è¡Œå·®åˆ†æ“ä½œæ¨™è¨˜ï¼Œé€šéç´¯åŠ å·®åˆ†é™£åˆ—åˆ¤æ–·çµæœæ˜¯å¦éƒ½å°æ–¼ç­‰æ–¼ 0ã€‚

### 3. IsZeroArray3 (æ–¹æ³•ä¸‰)

ä½¿ç”¨é¡å¤–çš„é™£åˆ—å„²å­˜æ“ä½œæ¬¡æ•¸ï¼Œé‚è¼¯çµæ§‹æ›´æ¸…æ™°ã€‚

```csharp
public bool IsZeroArray3(int[] nums, int[][] queries)
```

æ­¤æ–¹æ³•ä½¿ç”¨å…©å€‹ç¨ç«‹é™£åˆ—åˆ†åˆ¥è™•ç†å·®åˆ†å’Œæ“ä½œæ¬¡æ•¸ï¼Œå…ˆè¨ˆç®—å·®åˆ†å¾Œè¨ˆç®—å‰ç¶´å’Œï¼Œæé«˜äº†ç¨‹å¼ç¢¼çš„å¯è®€æ€§ã€‚

## ğŸ” å·®åˆ†é™£åˆ—æŠ€è¡“è©³è§£

å·®åˆ†é™£åˆ—æ˜¯ä¸€ç¨®é«˜æ•ˆè™•ç†å€é–“æ›´æ–°çš„è³‡æ–™çµæ§‹ã€‚å¦‚æœåŸå§‹é™£åˆ—ç‚º Aï¼Œå…¶å·®åˆ†é™£åˆ— D å®šç¾©ç‚ºï¼š

- D\[0] = A\[0]
- D\[i] = A\[i] - A\[i-1] (i > 0)

### å·®åˆ†é™£åˆ—çš„å„ªå‹¢

1. **é«˜æ•ˆçš„å€é–“æ“ä½œ**ï¼šå°å€é–“ \[l, r] ä¸­çš„æ‰€æœ‰å…ƒç´ åŠ ä¸Šå€¼ vï¼Œåªéœ€è¦ï¼š
   - D\[l] += v
   - D\[r+1] -= v
   - æ™‚é–“è¤‡é›œåº¦å¾ O (r-l+1) å„ªåŒ–ç‚º O (1)

2. **æ‰¹é‡è™•ç†**ï¼šå¤šæ¬¡å€é–“æ“ä½œå¯ä»¥åœ¨å·®åˆ†é™£åˆ—ä¸Šç–ŠåŠ ï¼Œæœ€å¾Œä¸€æ¬¡æ€§é‚„åŸ

3. **ç©ºé–“æ•ˆç‡**ï¼šåªéœ€è¦èˆ‡åŸé™£åˆ—ç›¸åŒé‡ç´šçš„é¡å¤–ç©ºé–“

### å·®åˆ†é™£åˆ—æ­¥é©Ÿ

1. **å»ºç«‹å·®åˆ†é™£åˆ—**ï¼šæ ¹æ“šåŸå§‹é™£åˆ—æˆ–å¾é›¶é–‹å§‹
2. **è¨˜éŒ„å€é–“æ“ä½œ**ï¼šåœ¨å·®åˆ†é™£åˆ—çš„å·¦é‚Šç•ŒåŠ ä¸Šå€¼ï¼Œå³é‚Šç•Œ + 1 è™•æ¸›å»ç›¸åŒçš„å€¼
3. **é‚„åŸæ“ä½œçµæœ**ï¼šé€šéå‰ç¶´å’Œè¨ˆç®—é‚„åŸæ“ä½œå¾Œçš„é™£åˆ—

## ğŸ“Š è¤‡é›œåº¦åˆ†æ

| æ–¹æ³•                 | æ™‚é–“è¤‡é›œåº¦    | ç©ºé–“è¤‡é›œåº¦ |
| ------------------ | -------- | ----- |
| IsZeroArray (æ–¹æ³•ä¸€)  | O(n + q) | O(n)  |
| IsZeroArray2 (æ–¹æ³•äºŒ) | O(n + q) | O(n)  |
| IsZeroArray3 (æ–¹æ³•ä¸‰) | O(n + q) | O(n)  |

å…¶ä¸­ n æ˜¯é™£åˆ—é•·åº¦ï¼Œq æ˜¯æŸ¥è©¢æ“ä½œæ•¸é‡ã€‚

## ğŸ§ª ä½¿ç”¨ç¯„ä¾‹

### 1. æ¸¬è©¦æ¡ˆä¾‹ 1: å¯ä»¥è½‰æ›ç‚ºå…¨é›¶é™£åˆ—çš„æƒ…æ³

```csharp
int[] nums1 = { 2, 1, 3, 2 };
int[][] queries1 = {
    new int[] { 0, 1 },
    new int[] { 1, 3 },
    new int[] { 0, 3 },
    new int[] { 0, 3 }
};

// æ–¹æ³•ä¸€æ¸¬è©¦
bool result1 = IsZeroArray(nums1, queries1);
Console.WriteLine($"æ–¹æ³•ä¸€çµæœ: {(result1 ? "å¯ä»¥è½‰æ›ç‚ºå…¨é›¶é™£åˆ—" : "ç„¡æ³•è½‰æ›ç‚ºå…¨é›¶é™£åˆ—")}");

// æ–¹æ³•äºŒæ¸¬è©¦
bool result2 = IsZeroArray2(nums1, queries1);
Console.WriteLine($"æ–¹æ³•äºŒçµæœ: {(result2 ? "å¯ä»¥è½‰æ›ç‚ºå…¨é›¶é™£åˆ—" : "ç„¡æ³•è½‰æ›ç‚ºå…¨é›¶é™£åˆ—")}");

// æ–¹æ³•ä¸‰æ¸¬è©¦
Program instance = new Program();
bool result3 = instance.IsZeroArray3(nums1, queries1);
Console.WriteLine($"æ–¹æ³•ä¸‰çµæœ: {(result3 ? "å¯ä»¥è½‰æ›ç‚ºå…¨é›¶é™£åˆ—" : "ç„¡æ³•è½‰æ›ç‚ºå…¨é›¶é™£åˆ—")}");
```

### 2. æ¸¬è©¦æ¡ˆä¾‹ 2: ç„¡æ³•è½‰æ›ç‚ºå…¨é›¶é™£åˆ—çš„æƒ…æ³

```csharp
int[] nums2 = { 3, 2, 1, 4 };
int[][] queries2 = {
    new int[] { 0, 2 },
    new int[] { 1, 3 }
};

// æ¸¬è©¦ä¸‰ç¨®æ–¹æ³•
bool test1 = IsZeroArray(nums2, queries2);   // çµæœ: false
bool test2 = IsZeroArray2(nums2, queries2);  // çµæœ: false
bool test3 = instance.IsZeroArray3(nums2, queries2);  // çµæœ: false
```

## ä¸‰ç¨®æ–¹æ³•æ¯”è¼ƒ

### æ–¹æ³•ä¸€ (IsZeroArray)

```csharp
public static bool IsZeroArray(int[] nums, int[][] queries)
{
    // ç²å–é™£åˆ—é•·åº¦
    int n = nums.Length;
    // å»ºç«‹å·®åˆ†é™£åˆ—ï¼Œé•·åº¦ç‚º n+1 ä»¥è™•ç†é‚Šç•Œæƒ…æ³
    int[] diff = new int[n + 1];

    // éæ­·æ¯å€‹æŸ¥è©¢æ“ä½œ
    foreach (int[] q in queries)
    {
        // å°å€é–“ [l,r] é€²è¡Œæ“ä½œæ¨™è¨˜
        diff[q[0]]++;
        diff[q[1] + 1]--;
    }

    // ç´¯åŠ å·®åˆ†é™£åˆ—å¾—åˆ°æ¯å€‹ä½ç½®çš„å¯¦éš›æ“ä½œæ¬¡æ•¸
    int operationCount = 0;
    for (int i = 0; i < n; i++)
    {
        operationCount += diff[i];
        // æª¢æŸ¥æ“ä½œæ¬¡æ•¸æ˜¯å¦è¶³å¤ å°‡åŸå€¼è®Šç‚º 0
        if (nums[i] > operationCount)
        {
            return false;
        }
    }
    return true;
}
```

### æ–¹æ³•äºŒ (IsZeroArray2)

```csharp
public static bool IsZeroArray2(int[] nums, int[][] queries)
{
    int n = nums.Length;
    // å»ºç«‹å·®åˆ†é™£åˆ—è¡¨ç¤ºå½¢å¼ï¼Œå°‡åŸé™£åˆ—è½‰ç‚ºå·®åˆ†å½¢å¼
    int[] diff = new int[n + 1];
    diff[0] = nums[0];
    for (int i = 1; i < n; i++)
    {
        diff[i] = nums[i] - nums[i - 1];
    }
    
    // éæ­·æ¯å€‹æŸ¥è©¢æ“ä½œï¼Œæ›´æ–°å·®åˆ†é™£åˆ—
    foreach (int[] q in queries)
    {
        diff[q[0]]--;
        diff[q[1] + 1]++;
    }

    if (diff[0] > 0)
    { 
        return false;
    }
    
    // æª¢æŸ¥æ¯å€‹ä½ç½®æ˜¯å¦å¯ä»¥è½‰æ›ç‚º 0
    for (int i = 1; i < n; i++)
    {
        diff[i] += diff[i - 1];
        if (diff[i] > 0)
        {
            return false;
        }
    }
    return true;
}
```

### æ–¹æ³•ä¸‰ (IsZeroArray3)

```csharp
public bool IsZeroArray3(int[] nums, int[][] queries)
{
    // å»ºç«‹å·®åˆ†é™£åˆ—ï¼Œç”¨æ–¼è¨˜éŒ„å€é–“æ“ä½œ
    int[] deltaArray = new int[nums.Length + 1];
    foreach (int[] query in queries)
    {
        int left = query[0];
        int right = query[1];
        deltaArray[left] += 1;
        deltaArray[right + 1] -= 1;
    }
    
    // è¨ˆç®—æ¯å€‹ä½ç½®çš„æ“ä½œç¸½æ¬¡æ•¸
    int[] operationCounts = new int[deltaArray.Length];
    int currentOperations = 0;
    for (int i = 0; i < deltaArray.Length; i++)
    {
        currentOperations += deltaArray[i];
        operationCounts[i] = currentOperations;
    }
    
    // æª¢æŸ¥æ¯å€‹ä½ç½®æ˜¯å¦å¯ä»¥è½‰æ›ç‚º0
    for (int i = 0; i < nums.Length; i++)
    {
        if (operationCounts[i] < nums[i])
        {
            return false;
        }
    }
    return true;
}
```

## ğŸ”„ å·®åˆ†é™£åˆ—å·¥ä½œåŸç†ç¤ºç¯„

åœ¨ LeetCode 3355 å•é¡Œä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨å·®åˆ†é™£åˆ—ä¾†è™•ç†å€é–“æ“ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹ç°¡å–®çš„å¯¦ä¾‹è§£é‡‹ï¼š

å‡è¨­æœ‰ä¸€å€‹é™£åˆ— `nums = [2, 1, 3, 2]`ï¼ŒåŠæŸ¥è©¢æ“ä½œ `queries = [[0, 1], [1, 3]]`ï¼š

1. **åˆå§‹åŒ–å·®åˆ†é™£åˆ—**: `diff = [0, 0, 0, 0, 0]` (é•·åº¦ç‚º n+1)

2. **è™•ç†æŸ¥è©¢æ“ä½œ**:
   - æŸ¥è©¢ \[0, 1]: diff \[0]++, diff \[2]-- â†’ diff = \[1, 0, -1, 0, 0]
   - æŸ¥è©¢ \[1, 3]: diff \[1]++, diff \[4]-- â†’ diff = \[1, 1, -1, 0, -1]

3. **è¨ˆç®—æ“ä½œæ¬¡æ•¸**:
   - position 0: diff\[0] = 1
   - position 1: diff\[0] + diff\[1] = 1 + 1 = 2
   - position 2: diff\[0] + diff\[1] + diff\[2] = 1 + 1 + (-1) = 1
   - position 3: diff\[0] + diff\[1] + diff\[2] + diff\[3] = 1 + 1 + (-1) + 0 = 1

4. **æ¯”è¼ƒæ“ä½œæ¬¡æ•¸èˆ‡åŸå§‹å€¼**:
   - nums \[0] = 2 > æ“ä½œæ¬¡æ•¸ 1: ç„¡æ³•è®Šç‚º 0
   - nums \[1] = 1 < æ“ä½œæ¬¡æ•¸ 2: å¯ä»¥è®Šç‚º 0
   - nums \[2] = 3 > æ“ä½œæ¬¡æ•¸ 1: ç„¡æ³•è®Šç‚º 0
   - nums \[3] = 2 > æ“ä½œæ¬¡æ•¸ 1: ç„¡æ³•è®Šç‚º 0

å› æ­¤ï¼Œé€šéé€™äº›æ“ä½œï¼Œç„¡æ³•å°‡é™£åˆ—è®Šç‚ºå…¨é›¶ã€‚
