# 拓樸排序\_DFS

本專案示範如何使用 C# 以 DFS (深度優先搜尋) 實作拓樸排序，並偵測有向圖中是否存在環。

## 🔄 DFS 拓扑排序的演算法步驟

1. 建立一個 visited 陣列，記錄每個節點是否已訪問。
2. 使用遞迴 DFS 遍歷所有節點。
3. 每當一個節點完成遞迴 (它後面所有的節點都處理完)，將它推入結果堆疊。
4. 最後將堆疊反轉，即為拓扑排序結果。
5. 若需要偵測環，可以加上「遞迴中的節點集合」來判斷是否遇到自己。

## 特色

- 支援任意節點數與鄰接清單建構圖形
- 以 DFS 遞迴方式完成拓樸排序
- 內建環偵測機制，遇到有環時會顯示錯誤訊息
- 程式碼含完整中文註解，易於學習與維護

## 執行方式

1. 使用 Visual Studio 或 `dotnet run` 執行本專案
2. 終端機會輸出拓樸排序結果，若圖中有環則顯示錯誤

## 程式碼架構說明

- `Main`：
  - 建立圖的鄰接清單
  - 呼叫 `DfsTopologicalSort` 執行拓樸排序
  - 根據回傳結果輸出排序或錯誤
- `DfsTopologicalSort`：
  - 主要拓樸排序演算法，負責遍歷所有節點並呼叫 DFS
  - 若偵測到環則回傳 null
- `DFS`：
  - 遞迴處理每個節點，並利用 recursionStack 偵測遞迴路徑上的環
  - 所有相鄰節點處理完後將節點推入堆疊

## 範例輸出

```
拓扑排序結果 (DFS): 5, 4, 2, 3, 1, 0
```

或

```
圖中有環，無法進行拓扑排序
```

## 📌 注意事項

- 拓樸排序僅適用於有向無環圖 (DAG)，若圖中有環則無法產生正確結果。
- 若要自訂圖形，請修改 `Main` 內的鄰接清單設定。
- 若程式回傳 null，代表圖中存在環，請檢查輸入資料。

## 參考

- [拓樸排序 - 維基百科](https://zh.wikipedia.org/wiki/%E6%8B%93%E6%A8%B8%E6%8E%92%E5%BA%8F)
- [DFS 演算法教學](https://zh.wikipedia.org/wiki/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2)

---

如需自訂圖形，請修改 `Main` 內的鄰接清單設定。
